<!DOCTYPE html>
<html>
  <head>
    <title>EDA II</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link href="../assets/css/material-dashboard.css?v=2.1.0" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="boxes.css" />
    <script src="jquery-1.7.2.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.ui.touch-punch.min.js"></script>
    <script src="jquery.alerts.js"></script> 
    <link href="jquery.alerts.css" rel="stylesheet" type="text/css" media="screen" />
    <script src="Heap.js"></script>

    <script >
      heap = new Heap();      
      vGap = 40;
      radius = 20;
      
      function draw() {
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext("2d");

        // Reset size will clear the canvas, but not for IE9
        canvas.width = window.innerWidth - 20;
        canvas.height = window.innerHeight - 180;        
        context.clearRect(0, 0, canvas.width, canvas.height); // For IE 9

        context.font = "14px sans-serif";
        context.strokeStyle = "#100"; // Set a pen color
        
        if (heap.isEmpty()) {
          context.fillText("heap is empty", canvas.width / 2 - 50, 15);  
        }
        else {
          x = canvas.width / 2;
          y = 30;
          
          drawTree(context, x, y, radius, 0, canvas.width / 4);
        }
          
        context.stroke();
      }
      
      function drawTree(context, x, y, radius, i, hGap) {
        // Draw the node list[i]
        context.fillText(heap.list[i] + "", x - 5, y + 5);  
        context.arc(x, y, radius, 0, Math.PI * 2, false);    
          
        if (2 * i + 1 < heap.list.length) {
          connectTwoCircles(context, x, y, x - hGap, y + vGap);
          context.moveTo(x - hGap + radius, y + vGap); 
          drawTree(context, x - hGap, y + vGap, radius, 2 * i + 1, hGap / 2);
        }
       
        if (2 * i + 2 < heap.list.length) {
          connectTwoCircles(context, x, y, x + hGap, y + vGap);
          context.moveTo(x + hGap + radius, y + vGap); 
          drawTree(context, x + hGap, y + vGap, radius, 2 * i + 2, hGap / 2);
        }
      }
      
      // Connect two circles centered at (x1, y1) and (x2, y2) 
      function connectTwoCircles(context, x1, y1, x2, y2) {
        var d = Math.sqrt(vGap * vGap + (x2 - x1) * (x2 - x1));
        var x11 = x1 - radius * (x1 - x2) / d;
        var y11 = y1 - radius * (y1 - y2) / d;
        var x21 = x2 + radius * (x1 - x2) / d;
        var y21 = y2 + radius * (y1 - y2) / d;
        context.moveTo(x11, y11);
        context.lineTo(x21, y21);
      } 
    
      function remove1() {
        if (heap.isEmpty()) {
          jAlert("The heap is empty"); 
        }
        else {
          heap.remove();
          draw();
        }
      }
      
      function insert() {
        var value = document.getElementById('value').value.trim();
        if (value == "") {
          jAlert("no value entered");
        }
        else {
          heap.add(parseInt(value));
        }

        draw();
      }
      
      function drawArrowLine(context, x1, y1, x2, y2) {
        context.moveTo(x1, y1);
        context.lineTo(x2, y2);

        // find slope of this line
        var slope = (y1 - y2) / (x1 - x2);

        var arctan = Math.atan(slope);

        // This will flip the arrow 45 off of a
        // perpendicular line at pt x2
        var set45 = 1.57 / 2;
    
        // arrows should always point towards i, not i+1
        if (x1 < x2) {
          // add 90 degrees to arrow lines
          set45 = -1.57 * 1.5;
        }

        // set length of arrows
        var arrlen = 15;

        // draw arrows on line
        context.moveTo(x2, y2);
        context.lineTo(x2 + Math.cos(arctan + set45) * arrlen,
        y2 + Math.sin(arctan + set45) * arrlen);

        context.moveTo(x2, y2);
        context.lineTo(x2 + Math.cos(arctan - set45) * arrlen,
        y2 + Math.sin(arctan - set45) * arrlen);
      }
    </script>
  
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-89940905-27"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());
  gtag('config', 'UA-89940905-27');
</script>

<script type="text/javascript" src="../logging.js"></script>
</head>
  <body class="dark-edition">
    <div class="wrapper ">
      <div class="sidebar" data-color="orange" data-background-color="black" data-image="../assets/img/sidebar-2.jpg">
        <div class="logo">
          <a href="http://www.creative-tim.com" class="simple-text logo-normal">
            EDA II - SORT
          </a>
        </div>
        <div class="sidebar-wrapper">
          <ul class="nav">
            <!-- your sidebar here -->
            <li class="nav-item ">
              <a class="nav-link" href="../index.html">
                <i class="material-icons">dashboard</i>
                <p>Geral</p>
              </a>
            </li>
            <li class="nav-item  ">
              <a class="nav-link" href="RadixSort.html">
                <i class="material-icons">view_week</i>
                <p>Radix Sort</p>
              </a>
            </li>
            <li class="nav-item active  ">
              <a class="nav-link" href="Heap.html">
                <i class="material-icons">view_week</i>
                <p>Heap</p>
              </a>
            </li>
            <!-- your sidebar here -->
          </ul>
        </div>
      </div>
      <div class="main-panel">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
          <div class="container-fluid">
            <div class="navbar-wrapper">
              <a class="navbar-brand" href="javascript:void(0)">Heap</a>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
              <span class="sr-only">Toggle navigation</span>
              <span class="navbar-toggler-icon icon-bar"></span>
              <span class="navbar-toggler-icon icon-bar"></span>
              <span class="navbar-toggler-icon icon-bar"></span>
            </button>
          </div>
        </nav>
        <!-- End Navbar -->
        <div class="content">
            <div class="container-fluid">
              <div class="col-8 offset-3">
                <button type="button" class = "btn btn-round btn-fill btn-success" onclick="step()">Pr√≥ximo passo</button>
                <button type="button" class = "btn btn-round btn-fill btn-info" onclick="reset()">Iniciar/Reiniciar</button>
              </div>
              <div class="col-8 offset-2">
                <div class="card card-chart col-12">
                  <div class="card-header card-header-warning">
                    <div class="ct-chart" id="websiteViewsChart"></div>
                  </div>
                  <div class="card-body">
                    <h4 class="card-title">Lista</h4>
                    <p class="card-category">Radix LSD</p>
                  </div>
                </div>
              </div>


  <body onload="draw()" onresize="draw()">   
    <div style="margin: 0px auto; border: 1px solid #EB0D1B; text-align: right">
      <canvas id="canvas" width="200" height="300"></canvas>
    </div>
    <div style="text-align: center; margin-top: 1em">
      <span style="border: 1px solid #37826C; padding: 3px">
        Enter a key: <input type="text" value="" id="value" style="width: 3em; text-align: right">
        <button type="button" class="button" onclick="insert()">Insert</button>
      </span>
      <button type="button" class="button" onclick="remove1()">Remove the root</button>
    </div>

    <script src="../assets/js/core/jquery.min.js"></script>
    <script src="../assets/js/core/popper.min.js"></script>
    <script src="../assets/js/core/bootstrap-material-design.min.js"></script>
    <script src="https://unpkg.com/default-passive-events"></script>
    <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Chartist JS -->
    <script src="../assets/js/plugins/chartist.min.js"></script>
    <!--  Notifications Plugin    -->
    <script src="../assets/js/plugins/bootstrap-notify.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="../assets/js/material-dashboard.js?v=2.1.0"></script>
    <!-- Material Dashboard DEMO methods, don't include it in your project! -->
    <script src="../assets/demo/demo.js"></script>



  </body>
</html>
